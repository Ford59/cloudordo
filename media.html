<script>
const videoUrl = 'https://dcu30chsckoal.cloudfront.net/small+2.mp4'; // 替换为你的视频链接

        fetch(videoUrl)
            .then(response => response.blob())
            .then(blob => {
                const videoPlayer = document.getElementById('video');
                const videoObjectURL = URL.createObjectURL(blob);
                video.src = new URL(videoObjectURL, window.location.origin).toString();

                // 添加播放成功事件监听器
                video.addEventListener('play', () => {
                    // 获取视频标签的 src 属性
                    const videoSrc = video.src;

                    // 添加 window.onbeforeunload 事件监听器
                    window.addEventListener('beforeunload', () => {
                        // 判断视频标签是否在其他页面打开
                        const videoNode = document.querySelector(videoSrc);
                        if (videoNode && videoNode.parentNode !== document.body) {
                            // 撤销链接
                            URL.revokeObjectURL(videoObjectURL);
                        }
                    });
                });
            })
            .catch(error => {
                console.error('加载视频时出现错误：', error);
            });

</script>
<video controls src="" id="video"></video>
